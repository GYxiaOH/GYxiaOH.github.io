<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "db8b42fc"
    });
  daovoice('update');
  </script>
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT, 人世不平一剑消" />










<meta name="description" content="人世不平一剑消">
<meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="小 君">
<meta property="og:url" content="https://www.gyxiaoh.com/index.html">
<meta property="og:site_name" content="小 君">
<meta property="og:description" content="人世不平一剑消">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小 君">
<meta name="twitter:description" content="人世不平一剑消">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.gyxiaoh.com/"/>





  <title>小 君</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8ad16d364f0235b40e33f9ac13ce6d97";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小 君</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">One Day I'll Fly Away<br>leave all this to yesterday</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/05/02/算法基础系列（1）-逆序对，小和，二叉树，剑指offer3-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/02/算法基础系列（1）-逆序对，小和，二叉树，剑指offer3-6/" itemprop="url">算法基础系列（1）:逆序对，小和，二叉树，剑指offer3-6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-02T17:13:00+08:00">
                2018-05-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法基础复习/" itemprop="url" rel="index">
                    <span itemprop="name">算法基础复习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/02/算法基础系列（1）-逆序对，小和，二叉树，剑指offer3-6/" class="leancloud_visitors" data-flag-title="算法基础系列（1）:逆序对，小和，二叉树，剑指offer3-6">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="算法基础系列（1）-逆序对，小和，二叉树，剑指offer3-6"><a href="#算法基础系列（1）-逆序对，小和，二叉树，剑指offer3-6" class="headerlink" title="算法基础系列（1）:逆序对，小和，二叉树，剑指offer3-6"></a>算法基础系列（1）:逆序对，小和，二叉树，剑指offer3-6</h1><p>　　为了offer，加油！　　</p>
<h2 id="逆序对与小和"><a href="#逆序对与小和" class="headerlink" title="逆序对与小和"></a>逆序对与小和</h2><p>　　排序算法的衍生，告诉了我们排序算法重要的地方是它的思想，两个问题都用了归并排序的思想，非常厉害的思路。</p>
<h3 id="小和问题"><a href="#小和问题" class="headerlink" title="小和问题"></a>小和问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在一个数组中，每一个数左边比当前数小的数累加起来，叫做这个数组的小和。求一个数组</span><br><span class="line">的小和。</span><br><span class="line">例子：</span><br><span class="line">[1,3,4,2,5]</span><br><span class="line">1左边比1小的数，没有；</span><br><span class="line">3左边比3小的数，1；</span><br><span class="line">4左边比4小的数，1、3；</span><br><span class="line">2左边比2小的数，1；</span><br><span class="line">5左边比5小的数，1、3、4、2；</span><br><span class="line">所以小和为1+1+3+1+1+3+4+2=16</span><br></pre></td></tr></table></figure>
<p>　　代码基本就是归并排序加了一句话，不过为了在递归中返回值我用了一个全局变量，感觉应该有更好的方法，有灵感的话再来修改。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(num,start,end,mid)</span>:</span></span><br><span class="line">    left = num[start:mid+<span class="number">1</span>]</span><br><span class="line">    right = num[mid+<span class="number">1</span>:end+<span class="number">1</span>]</span><br><span class="line">    left.append(sys.maxint)</span><br><span class="line">    right.append(sys.maxint)</span><br><span class="line"></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    leftindex = <span class="number">0</span></span><br><span class="line">    rightindex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start,end+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> left[leftindex] &lt; right[rightindex]:</span><br><span class="line">            num[i] = left[leftindex]</span><br><span class="line">            result += (len(right)<span class="number">-1</span> - rightindex) * left[leftindex]</span><br><span class="line">            leftindex +=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num[i] = right[rightindex]</span><br><span class="line">            rightindex +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_sort</span><span class="params">(num,start,end)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> start&lt;end:</span><br><span class="line">        <span class="keyword">global</span> x</span><br><span class="line">        mid = start + (end - start)/<span class="number">2</span></span><br><span class="line">        merge_sort(num,start,mid)</span><br><span class="line">        merge_sort(num,mid+<span class="number">1</span>,end)</span><br><span class="line">        x += merge(num,start,end,mid)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">global</span> x</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    nums = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'nums is:'</span>, nums  </span><br><span class="line">    merge_sort(nums, <span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure></p>
<h3 id="逆序对问题"><a href="#逆序对问题" class="headerlink" title="逆序对问题"></a>逆序对问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在一个数组中，左边的数如果比右边的数大，则折两个数构成一个逆序对，请打印所有逆序对。</span><br></pre></td></tr></table></figure>
<p>　　代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(num,start,end,mid)</span>:</span></span><br><span class="line">    left = num[start:mid+<span class="number">1</span>]</span><br><span class="line">    right = num[mid+<span class="number">1</span>:end+<span class="number">1</span>]</span><br><span class="line">    left.append(sys.maxint)</span><br><span class="line">    right.append(sys.maxint)</span><br><span class="line"></span><br><span class="line">    leftindex = <span class="number">0</span></span><br><span class="line">    rightindex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start,end+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> left[leftindex] &lt; right[rightindex]:</span><br><span class="line">            num[i] = left[leftindex]</span><br><span class="line">            </span><br><span class="line">            leftindex +=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num[i] = right[rightindex]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(leftindex,len(left)<span class="number">-1</span>):</span><br><span class="line">                <span class="keyword">print</span> (left[j],right[rightindex])</span><br><span class="line">            rightindex +=<span class="number">1</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_sort</span><span class="params">(num,start,end)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> start&lt;end:</span><br><span class="line">        mid = start + (end - start)/<span class="number">2</span></span><br><span class="line">        merge_sort(num,start,mid)</span><br><span class="line">        merge_sort(num,mid+<span class="number">1</span>,end)</span><br><span class="line">        merge(num,start,end,mid)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'nums is:'</span>, nums  </span><br><span class="line">    merge_sort(nums, <span class="number">0</span>, <span class="number">5</span>)  </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'merge sort:'</span>, nums</span><br></pre></td></tr></table></figure></p>
<p>　　可以发现两个问题只改了一行代码，都是利用分治的思想，果然不学习根本想不到。</p>
<h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将二叉树按层结构输出，如：  </span><br><span class="line">  1  </span><br><span class="line"> 2 3  </span><br><span class="line"> 4 5 6</span><br></pre></td></tr></table></figure>
<p>用两个指针一个跟着添加的节点，一个记录最后的节点，开始我没想通无限添加节点怎么取更新这个last的值，后来发现只有输出的节点等于last我在更新就可以了。代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    first = TreeNode(<span class="number">1</span>)</span><br><span class="line">    first.left = TreeNode(<span class="number">2</span>)</span><br><span class="line">    first.right = TreeNode(<span class="number">3</span>)</span><br><span class="line">    first.left.left = TreeNode(<span class="number">4</span>)</span><br><span class="line">    first.right.left = TreeNode(<span class="number">5</span>)</span><br><span class="line">    last = first</span><br><span class="line">    temp = []</span><br><span class="line">    temp.append(first)</span><br><span class="line">    nlast = first</span><br><span class="line">    last = first</span><br><span class="line">    hang = []</span><br><span class="line">    <span class="keyword">while</span> temp:</span><br><span class="line">        out = temp.pop(<span class="number">0</span>)</span><br><span class="line">        hang.append(str(out.val))</span><br><span class="line">        <span class="keyword">if</span> out.left:</span><br><span class="line">            temp.append(out.left)</span><br><span class="line">            nlast = out.left</span><br><span class="line">        <span class="keyword">if</span> out.right:</span><br><span class="line">            temp.append(out.right)</span><br><span class="line">            nlast = out.right</span><br><span class="line">        <span class="keyword">if</span> last == out:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">' '</span>.join(hang)</span><br><span class="line">            hang = []</span><br><span class="line">            last = nlast</span><br></pre></td></tr></table></figure></p>
<h2 id="二叉树的序列化与反序列化"><a href="#二叉树的序列化与反序列化" class="headerlink" title="二叉树的序列化与反序列化"></a>二叉树的序列化与反序列化</h2><p>　　基本操作，能很好的锻炼递归的思想．．．．．．说实话反递归我想了很久。主要感觉递归的时候无法直接对原数组进行操作的话立马想到用返回值操作。另外反序列化都是一样的操作。<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">layersel</span><span class="params">(node,se)</span>:</span></span><br><span class="line">    temp = [node]</span><br><span class="line">    <span class="keyword">while</span>(temp):</span><br><span class="line">        tempNode = temp.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> tempNode.left:</span><br><span class="line">            temp.append(tempNode.left)</span><br><span class="line">            se.append(str(tempNode.left.val)+<span class="string">'!'</span>)</span><br><span class="line">        <span class="keyword">if</span> tempNode.right:</span><br><span class="line">            temp.append(tempNode.right)</span><br><span class="line">            se.append(str(tempNode.right.val)+<span class="string">'!'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            se.append(<span class="string">'#!'</span>)</span><br><span class="line">            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sel</span><span class="params">(node,se)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> node:</span><br><span class="line">        se.append(str(node.val)+ <span class="string">'!'</span>)</span><br><span class="line">        sel(node.left,se)</span><br><span class="line">        sel(node.right,se)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        se.append(<span class="string">'#!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dese</span><span class="params">(se)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> se:</span><br><span class="line">        temp = se.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> temp == <span class="string">'#'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            newnode = TreeNode(temp)</span><br><span class="line">            newnode.left = dese(se)</span><br><span class="line">            newnode.right = dese(se)</span><br><span class="line">            <span class="keyword">return</span> newnode</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    first = TreeNode(<span class="number">1</span>)</span><br><span class="line">    first.left = TreeNode(<span class="number">3</span>)</span><br><span class="line">    first.right = TreeNode(<span class="number">2</span>)</span><br><span class="line">    first.left.left = TreeNode(<span class="number">4</span>)</span><br><span class="line">    first.right.left = TreeNode(<span class="number">5</span>)</span><br><span class="line">    se = []</span><br><span class="line">    sel(first,se)</span><br><span class="line">    <span class="keyword">print</span> se</span><br><span class="line">    seli =  <span class="string">''</span>.join(se)</span><br><span class="line">    temp = seli.split(<span class="string">'!'</span>)</span><br><span class="line">    init = TreeNode(<span class="number">0</span>)</span><br><span class="line">    init = dese(temp)</span><br><span class="line">    se = []</span><br><span class="line">    dese(se)</span><br><span class="line">    sel(init,se)</span><br><span class="line">    <span class="keyword">print</span> se</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/05/01/震惊！用贝叶斯的方法解释L1-L2正则化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/01/震惊！用贝叶斯的方法解释L1-L2正则化/" itemprop="url">震惊！用贝叶斯的方法解释L1,L2正则化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-01T22:59:00+08:00">
                2018-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深度（机器）学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度（机器）学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/01/震惊！用贝叶斯的方法解释L1-L2正则化/" class="leancloud_visitors" data-flag-title="震惊！用贝叶斯的方法解释L1,L2正则化">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="震惊！用贝叶斯的方法解释L1-L2正则化"><a href="#震惊！用贝叶斯的方法解释L1-L2正则化" class="headerlink" title="震惊！用贝叶斯的方法解释L1,L2正则化"></a>震惊！用贝叶斯的方法解释L1,L2正则化</h1><p>　　今天在搜索混合拉普拉斯分布无意间看到的…..以前只知道logistic回归可以用贝叶斯的思想推出来（贝叶斯公式上下除以分子）…..完全没有想到正则化也可以。现在把链接放下来以免自己忘记。<br>　　<a href="https://www.zhihu.com/question/23536142" target="_blank" rel="noopener">LR正则化与数据先验分布的关系？</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/30/Image-Text系列（1）：最初的开始-WSABIE-与DeViSE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/30/Image-Text系列（1）：最初的开始-WSABIE-与DeViSE/" itemprop="url">Image-Text系列（1）：最初的开始-WSABIE 与DeViSE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-30T16:44:00+08:00">
                2018-04-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深度（机器）学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度（机器）学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/30/Image-Text系列（1）：最初的开始-WSABIE-与DeViSE/" class="leancloud_visitors" data-flag-title="Image-Text系列（1）：最初的开始-WSABIE 与DeViSE">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Image-Text系列（1）：最初的开始-WSABIE-与DeViSE"><a href="#Image-Text系列（1）：最初的开始-WSABIE-与DeViSE" class="headerlink" title="Image-Text系列（1）：最初的开始-WSABIE 与DeViSE"></a>Image-Text系列（1）：最初的开始-WSABIE 与DeViSE</h1><p>　　最近找实习不是很顺利，伐开心。感觉自己主要要从两个方法努力去应对来年的秋招。基础和前沿。过去因为自己做的方向感觉比较冷门，就没有其他志同道合的同志．．．．．．因此看论文都属于一个瞎看的状态，最近发现其实我们的任务和Image-Text　mapping/embedding 或者有的叫cross modal很像，和image caption也可以靠一靠，因此打算把这一方向的经典论文补一补。最大的问题是……这个方向的大佬好像都很低调。。。。很少能看到中文博客，因此尽自己所能总结下对论文的理解吧。那么开始：</p>
<h2 id="WSABIE"><a href="#WSABIE" class="headerlink" title="WSABIE"></a>WSABIE</h2><p><a href="https://heleifz.github.io/14696374110477.html" target="_blank" rel="noopener">算法论文：WSABIE: Scaling Up To Large Vocabulary Image Annotation</a><br>　　这篇可以参考上述博客…….这是为数不多的可以看到有人做过笔记的论文，可能是我英语不好吧，感觉论文有些地方写的很奇怪，因此没看到中文之前很多地方很困惑，下面记录下我一些卡主的点和对论文的理解，如果明白了，对着论文或者博客看应该很快：</p>
<ol>
<li>论文是对09年的论文（应用SVM模型）的一点改进，大体思想是差不多。大意是将图片和标签都转换为向量表示，在通过线性变换（就是乘一个矩阵）同一个低维空间中。因为在同一个空间中，所以两个向量的相似度就可以用向量的内积表示。模型学习的目标是使得图片和正确的标签向量内积最大，和错误的标签向量内积尽可能的小。</li>
<li>在09年的论文里，作者的损失函数用的是指示函数加权重（我理解的是这样）,所谓指示函数其实就是个sign函数，或者叫01损失函数？也就是遍历所有内积，一旦错误标签与图像的内积大于正确标签与图像的内积，损失就是1，然后得到了一个损失值，在通过L函数乘上权重（如果你和我一样对传统机器学习不是特别了解，这里你可能会纠结很久这函数到底是啥，怎么传的梯度，其实我想了想就是把1变成了aj，也就是给每个损失乘了个权重）。通过这个loss在结构化的SVM（其实我不大懂啥是结构化的SVM）训练，在text retrieval数据集上取得了很好的效果。并且取了aj=1/j，我的理解应该是它的loss应该是排序过得，然后让最大的错误标签向量离图片远一点，这样aj=1/j效果好才比较科学。当然好像不用也有一样的效果，因为迭代的过程中会不断地调换第一个错误标签向量。嗯，这个可以具体情况具体实验来看。</li>
<li>本论文在09论文的基础上提出了两个问题，一是01损失不连续，因此无法用SGD优化，二十结构化SVM无法训练向量内积，因此无法动态的在线训练。因此论文作者将指示函数修改为hinge loss，一是让损失函数连续，二是模拟SVM的效果。当然损失函数对应的也改为1+错误内积&gt;正确内积才防入损失函数。</li>
<li>为了进一步提高速度，作者提出用采样的方法估计错误向量的个数，具体是随机采样，直到猜到满足1+错误内积&gt;正确内积的错误向量为止，并用几何分布来估计之前我说的权值函数，但是在这里我觉得权值函数的aj已经没有意义了，因为一次迭代只找到一个错误样本，乘上权值函数唯一的目的应该是使得错误向量远离图片向量的同时尽量减少错误向量的个数。如果有人发现了这里L的正确意义可以和我讨论下。<br>　　以上是我对本篇论文的一点理解，希望得到大家的指正。<h2 id="DeViSE"><a href="#DeViSE" class="headerlink" title="DeViSE"></a>DeViSE</h2><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/41473.pdf" target="_blank" rel="noopener">算法论文：DeViSE: A Deep Visual-Semantic Embedding Model</a><br>　　这篇文章似乎没有中文的博客在讲，不过其实本篇也不准备怎么讲，他就是上面那篇论文的时代进化版。上面那篇论文图像特征和文字特征都是学好的。在本篇文章中随着神经网络和深度学习的兴起，它将视觉部分直接接上一个Alex Net，标签部分使用w2vec学出来的word向量，所以整个网络都可以同时更新，即实现端对端的学习。Loss函数依然是hinge rank loss（没搞懂为啥要加个rank），在取错误向量的时候论文里没说清楚具体是怎么取。<br>　　以下是tf的一个实现<a href="https://github.com/aelda/DeViSE" target="_blank" rel="noopener">https://github.com/aelda/DeViSE</a> 。这里是找一个mini-batch里错误最大的那个向量进行优化，另外loss里的margin取得是0.1而不是上文的1。其他基本就没什么区别。注意下这个实现里有点问题，第一是它取得是最后分类层的向量作为图像的特征向量。另外是它读取预训练参数之后就不训练了。所以如果你要使用的话可以修改一下。<br>　　由于已经是13年的论文了，效果似乎比较一般，不过鉴于神经网络的功用，给出了图片＋句子的很多可能性，对于一些zero shot也就是没有出现在训练数据中的标签word也能有不错的效果，后来很多深度学习的相关网络思路都和这篇文章差不多，而且文章十分简单，值得一看。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/22/pycharm远程调试代码（tensorflow）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/22/pycharm远程调试代码（tensorflow）/" itemprop="url">pycharm远程调试代码（tensorflow）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-22T22:55:00+08:00">
                2018-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具应用/" itemprop="url" rel="index">
                    <span itemprop="name">工具应用</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/22/pycharm远程调试代码（tensorflow）/" class="leancloud_visitors" data-flag-title="pycharm远程调试代码（tensorflow）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="pycharm远程调试代码（tensorflow）"><a href="#pycharm远程调试代码（tensorflow）" class="headerlink" title="pycharm远程调试代码（tensorflow）"></a>pycharm远程调试代码（tensorflow）</h1><p>　　以前都是本地调试好代码然后上传服务器运行的。但是最近感觉太麻烦了，而且总想留着本机去干其他的事情，于是尝试使用pycharm远程连接服务器并用服务器的环境去运行代码。按照网络上的教程基本完成，但是有几个小坑网上记录的不是很清楚，这里记录下。<br>  　　本文主要参考<a href="https://www.cnblogs.com/xiongmao-cpp/p/7856596.html" target="_blank" rel="noopener">PyCharm 配置远程python解释器和在本地修改服务器代码</a>。遇到的坑如下：  </p>
<ol>
<li>配置Deployment的Mapping的Deployment path on server时，一定要配置的是自己的工作目录，如果用默认的根目录的话你无法down你的服务器上的代码，会提示没有这个文件或者目录</li>
<li>配置Python解释器的时候，不知道是不是版本的原因，我是2018最新版本，是没有Add remote 这个选项的，需要用Add按钮，然后在ssh interpreter里选择服务器的配置。</li>
<li>在本地运行的时候你需要配置一下服务器的环境变量，开始我很懵逼。。。。。后来发现就是正常的配置位置就好。在以下两个位置正常配置（和你服务器配置的路径一样就可以，比如服务器是/usr/local/cuda/lib64,那么你这里配置也是一样是/usr/local/cuda/lib64）<blockquote>
<p>在Settings -&gt; Build, Execution, Deployment -&gt; Console -&gt; Python Console 下最上面可设置环境变量。<br>任务栏顶部的 Run -&gt; Edit Configurations 里面有个 Environment Variables  </p>
</blockquote>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/19/从caffe到tensorflow-vggs网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/19/从caffe到tensorflow-vggs网络/" itemprop="url">从caffe到tensorflow-vggs网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-19T16:56:00+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/19/从caffe到tensorflow-vggs网络/" class="leancloud_visitors" data-flag-title="从caffe到tensorflow-vggs网络">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="从caffe到tensorflow-vggs网络"><a href="#从caffe到tensorflow-vggs网络" class="headerlink" title="从caffe到tensorflow-vggs网络"></a>从caffe到tensorflow-vggs网络</h1><p>　　本文所有网络结构已放进本人github <a href="https://github.com/GYxiaOH/vggs_tf" target="_blank" rel="noopener">vggs_tf</a>,再次惯例感谢<a href="https://kratzert.github.io/2017/02/24/finetuning-alexnet-with-tensorflow.html" target="_blank" rel="noopener"></a>大佬，本网络基本都是按照他的博客和代码一步一步搭建修改完成。<br>　　如果你和我一样是从caffe转向tensorflow，或者之前有一定的深度学习基础，那么我觉得你一步一步搭建好本文介绍的网络后基本就对tf的套路了解了，剩下的就是不断看新的网络实现，了解一些奇怪的API了。<br> 　　其实记录本文的主要目的是因为从caffe转到tensorflow后，第一，你不知道如何下手，第二，有时候你觉得你的网络结构，相关参数用的都是一模一样，但是效果就是比caffe差了不少。因此本文就是记录笔者在这些地方踩的坑。废话不多说，我们开始。  </p>
<h2 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h2><p>　　首先简单介绍下整个网络搭建比较重要的地方。<br>　　第一个就是vggs里面的内容，其中主要就是搭建网络框架，并且把读取参数的函数放了进去(caffemodel)，和caffe一样，tf搭建网路也很简答，就是create中的一堆conv=pool什么的，之所以每个部分都用了自己封装的函数是为了读取caffe的预训练模型更方便，tf里用layers建立的层通常weight的参数名字是”keras”，而caffe是”weights”。<br>　　第二个是finetune。它就是我们主要训练和测试的函数，其主要功能就是读取vggs里面的最后一层的输出结果，放入一个loss函数，在建立一个optimizer去优化整个网络，用一堆for循环跑N个epoch后输出结果。<br>　　第三个是datagenerator。这个感觉就可能是比较难的一块，因为caffe里基本就是转化为lmdb完事了，其他一些设定都比较简单，而转向tf第一个比较懵逼的就是如何输入数据，理论上讲tf输入数据有三种方法，这里用了比较新的dataset api，其实也比较简单，主要是不熟，建议和<a href="https://blog.csdn.net/kwame211/article/details/78579035" target="_blank" rel="noopener">TensorFlow全新的数据读取方式：Dataset API入门教程</a>对照着看，很快便能弄懂。</p>
<h2 id="为什么我的准确率不高"><a href="#为什么我的准确率不高" class="headerlink" title="为什么我的准确率不高"></a>为什么我的准确率不高</h2><p>　　当我按照原作者的Alex Net 该成我VGGS后，一开始还很不错，训练测试都很正常，可是我对网络进一步修改的时候，就发现网络的准确率很差，和caffe训练的有天壤之别。明明感觉网络结构和参数设置都差不多。。。。经过了快一个星期我才基本把所有原因找道，在这里记录下来，希望有缘人能不要做这些浪费时间的事情。  </p>
<h3 id="Pretrain-weights"><a href="#Pretrain-weights" class="headerlink" title="Pretrain weights"></a>Pretrain weights</h3><p>　　深度学习的参数初始化是十分重要的，所谓站在巨人的肩膀上，所以你没有在imagenet上的训练参数你很难直接把自己的数据集训练好。原来作者的代码这一部分就很奇怪 ，他用了一个skip_layer，这里面的层参数全部是随机初始化重新训练，并且之前继承了参数的层他把trainable设置成了False，这就会让训练的时候无法继承全部的参数，继承的参数又无法训练，虽然有文章表示VGG的前几层学习的特征比较通用，可以固定，当通过我的实际测试还是一起训练会得到比较好的结果。因此在我的VGG里面我改成了skiplayer和trainlayer，分别代表我需要重新初始化的层和我需要训练的层,这一步后大概争取率翻了一倍。</p>
<h3 id="参数初始化"><a href="#参数初始化" class="headerlink" title="参数初始化"></a>参数初始化</h3><p>　　tf里默认的好像是weight是uniform初始化，bia是0值，bia没什么问题，但是uniform初始化的效果目前来看是比较差的，换成normal（stdev=0.01）后大概准确率直接上升了百分之三。另外truncated和普通的normal好像有时前者好，有时后者好，可能要自己调试。  </p>
<h3 id="Optimizer"><a href="#Optimizer" class="headerlink" title="Optimizer"></a>Optimizer</h3><p>　　虽然caffe里说它的优化法是SGD，但实际上它是带momentum的。所以对应的是tf.train.MomentumOptimizer不过实测这个影响不大，可能就1%左右，而且在小规模数据的时候它的表现明显不如SGD。  </p>
<h3 id="L2-regular"><a href="#L2-regular" class="headerlink" title="L2 regular"></a>L2 regular</h3><p>　　一开始用tf训练的时候就感觉，我去，损失这么这么低，但准确率还是不高。其实这个很容易想到就是过拟合，没加正则项。tf里加正则项语句如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l2regular = tf.contrib.layers.l2_regularizer(<span class="number">0.0005</span>)</span><br><span class="line">regular = tf.contrib.layers.apply_regularization(l2regular, weights_list=weight_list)</span><br><span class="line">regularization_loss = tf.reduce_sum(tf.get_collection(tf.GraphKeys.REGULARIZATION_LOSSES))</span><br></pre></td></tr></table></figure></p>
<p>　　把这个loss加到总loss里就好</p>
<h3 id="Crop"><a href="#Crop" class="headerlink" title="Crop"></a>Crop</h3><p>　　这个是真的隐蔽，在最后我一行一行的对比，实在是找不到哪里和caffe网络的不同了，最后才想到有可能是数据增强的问题……这里我没做镜像，只是像caffe里一样，在训练的时候回随机剪裁一个对应输入大小的图像，而在测试的时候是裁剪中心图像。具体的可以看我datagenerator里的内容，主要是用了<code>tf.random_crop(img_resized,[self.resize,self.resize,3])</code>和<code>img_resized = tf.image.resize_image_with_crop_or_pad(img_resized,self.resize,self.resize)</code>两个函数。</p>
<h3 id="batch-norm"><a href="#batch-norm" class="headerlink" title="batch norm"></a>batch norm</h3><p>　　这个其实和我的任务比较相关，因为我最后会跑出多通道的fc层特征，如果不做归一化就把它们concat在一起，效果会比较差，因此在前面需要bn一下。</p>
<h3 id="小的问题"><a href="#小的问题" class="headerlink" title="小的问题"></a>小的问题</h3><p>　　加了句data.repeat(),避免最后一个batch过小出错。<br>　　注意下dataset的shuffle函数，它只会打乱batch的顺序，因此batch里面的样本顺序是不变的，千万注意，否则你的准确率可能会非常的低。</p>
<p>　　以上，其实这里主要是解决tf和caffe不同而提升的一些准确率，下一篇将通过kaggle里面的入门泰坦尼克来介绍下我的“第一次”实践经历。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/18/经典机器算法-决策树，随机森林，GDBT，XGDBT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/18/经典机器算法-决策树，随机森林，GDBT，XGDBT/" itemprop="url">经典机器算法-决策树，随机森林，GDBT，XGDBT</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-18T14:12:00+08:00">
                2018-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/机器学习/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/18/经典机器算法-决策树，随机森林，GDBT，XGDBT/" class="leancloud_visitors" data-flag-title="经典机器算法-决策树，随机森林，GDBT，XGDBT">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本篇文章的主要记录可以看懂得一个博客流程。从决策树到XGDBT可以看成是逐步进化的过程，先是最简单的决策树CART，然后采用集成学习的思想，分别用bagging和boost得到了随机森林和GDBT算法。而XGDBT可以看成是GDBT的一个更好的实现，在寻找更好的函数下降方向时考虑到了二阶导数，使收敛加快。以下是博客介绍：</p>
<ol>
<li>决策树<br>　　<a href="https://blog.csdn.net/shine19930820/article/details/62233166#cart生成算法" target="_blank" rel="noopener">cart生成算法</a><br>　　<a href="https://blog.csdn.net/weixin_40604987/article/details/79296427" target="_blank" rel="noopener"> Regression Tree 回归树</a></li>
<li>随机森林<br>　　这个其实很简单，随便看看林轩田的机器学习技法就好<a href="https://blog.csdn.net/red_stone1/article/details/76053360" target="_blank" rel="noopener">台湾大学林轩田机器学习技法课程学习笔记10 – Random Forest</a>  </li>
<li>GDBT<br>　<a href="https://blog.csdn.net/shine19930820/article/details/65633436" target="_blank" rel="noopener">『机器学习笔记 』GBDT原理-Gradient Boosting Decision Tree</a><br>　<a href="https://blog.csdn.net/red_stone1/article/details/76219948" target="_blank" rel="noopener"> 台湾大学林轩田机器学习技法课程学习笔记11 – Gradient Boosted Decision Tree</a></li>
<li>XGDBT<br>　<a href="https://blog.csdn.net/shine19930820/article/details/69500242" target="_blank" rel="noopener">https://blog.csdn.net/shine19930820/article/details/69500242</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/13/排序算法复习-Python实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/排序算法复习-Python实现/" itemprop="url">排序算法复习-Python实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T00:10:04+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/04/13/排序算法复习-Python实现/" class="leancloud_visitors" data-flag-title="排序算法复习-Python实现">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="排序算法复习-Python实现"><a href="#排序算法复习-Python实现" class="headerlink" title="排序算法复习-Python实现"></a>排序算法复习-Python实现</h1><p>　　为面试笔试做准备  </p>
<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><p>　　<code>稳定，时间复杂度 O(nlog n)</code><br>　　比较重要的一种排序，采用了分治法的思想，即不断的将原数组一分为二，直至为一的时候返回。之后再从下往上合并左右数组，合并的方法就是类似选择排序，比较左右数组数值大小，将小（大）的值依次插入，这样合并后的数组有序。就这样递归完成后得到有序数组。可以用来解决逆序对问题。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(nums, first, middle, last)</span>:</span>  </span><br><span class="line">    lnums = nums[first:middle+<span class="number">1</span>]</span><br><span class="line">    rnums = nums[middle+<span class="number">1</span>:last+<span class="number">1</span>]</span><br><span class="line">    <span class="comment">#避免越界</span></span><br><span class="line">    lnums.append(sys.maxint)  </span><br><span class="line">    rnums.append(sys.maxint)  </span><br><span class="line">    lindex = <span class="number">0</span></span><br><span class="line">    rindex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(first,last+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> lnums[lindex]&gt;rnums[rindex]:</span><br><span class="line">            nums[i] = rnums[rindex]</span><br><span class="line">            rindex += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            nums[i] = lnums[lindex]</span><br><span class="line">            lindex += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_sort</span><span class="params">(nums, first, last)</span>:</span>  </span><br><span class="line">    <span class="keyword">if</span> first&lt;last:</span><br><span class="line">        middle = (last+first)/<span class="number">2</span></span><br><span class="line">        merge_sort(nums,first,middle)</span><br><span class="line">        merge_sort(nums,middle+<span class="number">1</span>,last)</span><br><span class="line">        merge(nums,first,middle,last)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> nums[first]</span><br><span class="line">   </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:  </span><br><span class="line">    nums = [<span class="number">10</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">3</span>]  </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'nums is:'</span>, nums  </span><br><span class="line">    merge_sort(nums, <span class="number">0</span>, <span class="number">7</span>)  </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'merge sort:'</span>, nums</span><br></pre></td></tr></table></figure></p>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序　"></a>选择排序　</h2><p>　　 <code>不稳定，时间复杂度 O(n^2)</code><br> 　　选择排序(Selection sort)是一种简单直观的排序算法。它的工作原理如下。首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_sort</span><span class="params">(a)</span>:</span>  </span><br><span class="line">    <span class="string">''''' 选择排序  </span></span><br><span class="line"><span class="string">    每一趟从待排序的数据元素中选出最小（或最大）的一个元素， </span></span><br><span class="line"><span class="string">    顺序放在已排好序的数列的最后，直到全部待排序的数据元素排完。 </span></span><br><span class="line"><span class="string">    选择排序是不稳定的排序方法。 </span></span><br><span class="line"><span class="string">    '''</span>  </span><br><span class="line">    num = len(a)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">        minin = i </span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> range(minin+<span class="number">1</span>,num):</span><br><span class="line">            <span class="keyword">if</span> a[x]&lt;a[minin]:</span><br><span class="line">                minin = x</span><br><span class="line">        a[i],a[minin] = a[minin],a[i]</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:  </span><br><span class="line">    A = [<span class="number">10</span>, <span class="number">-3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>]    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Before sort:'</span>,A    </span><br><span class="line">    select_sort(A)    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'After sort:'</span>,A</span><br></pre></td></tr></table></figure></p>
<h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p>　　 <code>不稳定，最坏时间复杂度 O(n^2)，平均复杂度是O（nlogn)</code><br> 　　希尔排序，也称递减增量排序算法,希尔排序是非稳定排序算法。该方法又称缩小增量排序，因DL．Shell于1959年提出而得名。<br>   简单的说就是将数组通过增量分成若干个小数组，在小数组内排序，然后逐步递减增量直至增量为1，得到有序数组。具体可以参考<a href="https://www.cnblogs.com/chengxiao/p/6104371.html" target="_blank" rel="noopener">图解排序算法(二)之希尔排序</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shell_sort</span><span class="params">(a)</span>:</span>  </span><br><span class="line">    <span class="string">''''' shell排序  </span></span><br><span class="line"><span class="string">    '''</span>  </span><br><span class="line">    a_len=len(a)  </span><br><span class="line">    gap=a_len/<span class="number">2</span><span class="comment">#增量  </span></span><br><span class="line">    <span class="keyword">while</span> gap&gt;<span class="number">0</span>:  </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(a_len):<span class="comment">#对同一个组进行选择排序,从左往右找最小值</span></span><br><span class="line">            m=i  </span><br><span class="line">            j=i+gap</span><br><span class="line">            <span class="keyword">while</span> j&lt;a_len:  </span><br><span class="line">                <span class="keyword">if</span> a[j]&lt;a[m]:  </span><br><span class="line">                    m=j  </span><br><span class="line">                j+=gap<span class="comment">#j增加gap  </span></span><br><span class="line">            <span class="keyword">if</span> m!=i:  </span><br><span class="line">                a[m],a[i]=a[i],a[m]</span><br><span class="line"><span class="comment">#        print a</span></span><br><span class="line">        gap/=<span class="number">2</span>  </span><br><span class="line">   </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:  </span><br><span class="line">    A = [<span class="number">10</span>, <span class="number">-3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>,<span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>]    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Before sort:'</span>,A    </span><br><span class="line">    shell_sort(A)    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'After sort:'</span>,A</span><br></pre></td></tr></table></figure></p>
<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p>　<code>不稳定，时间复杂度 O(nlog n)</code><br> 　　比较重点，比前几个复杂点，不过想通了也很简单，感觉就是一个幼年体的二叉排序树，每个节点都比自己的左右孩子大（小）。几个重点是建堆的时候，从（ｎ／２）－１开始一个点一个点的从下往上调整（最后一个节点的倒数第二层），排序的时候交换头结点和尾节点，从上往下调整。插入的时候，插入到末尾，从下往上调整。删除的话，交换头尾节点，删除尾节点，从上往下调整。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">left</span><span class="params">(i)</span>:</span>  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*i+<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">right</span><span class="params">(i)</span>:</span>  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*i+<span class="number">2</span></span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_heapify</span><span class="params">(A, i, heap_size)</span>:</span>  </span><br><span class="line">    <span class="keyword">if</span> heap_size &lt;= <span class="number">0</span>:  </span><br><span class="line">        <span class="keyword">return</span>   </span><br><span class="line">    l = left(i)  </span><br><span class="line">    r = right(i)  </span><br><span class="line">    <span class="keyword">print</span> i,l,r</span><br><span class="line">    <span class="keyword">if</span> l&gt;=heap_size: </span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    largest = i </span><br><span class="line">  <span class="comment">#  print i</span></span><br><span class="line">    <span class="keyword">if</span> A[l]&gt;A[largest]:  </span><br><span class="line">        largest = l  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> r&lt;heap_size <span class="keyword">and</span> A[r]&gt;A[largest]:  </span><br><span class="line">        largest = r  </span><br><span class="line">    <span class="keyword">print</span> largest</span><br><span class="line">    <span class="keyword">if</span> i != largest : </span><br><span class="line">        A[i], A[largest] = A[largest], A[i]  </span><br><span class="line">        max_heapify(A, largest, heap_size)</span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bulid_max_heap</span><span class="params">(A)</span>:</span>  </span><br><span class="line">    heap_size = len(A)  </span><br><span class="line">    <span class="keyword">if</span> heap_size &gt;<span class="number">1</span>:  </span><br><span class="line">        node = (heap_size)/<span class="number">2</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">while</span> node &gt;= <span class="number">0</span>:  </span><br><span class="line">           max_heapify(A, node, heap_size)  </span><br><span class="line">           node -=<span class="number">1</span>  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sort_heap</span><span class="params">(A)</span>:</span></span><br><span class="line">    bulid_max_heap(A)</span><br><span class="line">    <span class="keyword">print</span> A</span><br><span class="line">    nosort_len = len(A)</span><br><span class="line">    <span class="keyword">while</span>(nosort_len&gt;<span class="number">0</span>):</span><br><span class="line">        A[<span class="number">0</span>],A[nosort_len<span class="number">-1</span>] = A[nosort_len<span class="number">-1</span>],A[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">print</span> A</span><br><span class="line">        nosort_len -= <span class="number">1</span></span><br><span class="line">        max_heapify(A,<span class="number">0</span>,nosort_len)</span><br><span class="line">        <span class="keyword">print</span> A</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span> :  </span><br><span class="line">   </span><br><span class="line">    A = [<span class="number">10</span>, <span class="number">-3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>]</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Before sort:'</span>,A  </span><br><span class="line">    sort_heap(A) </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'After sort:'</span>,A</span><br></pre></td></tr></table></figure></p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><code>不稳定，时间复杂度 最理想 O(nlogn)最差时间O(n^2)</code><br>　　也是分治的思想。选取第一位为中间数，把左边放小于等于它的，右边放大于它的，然后递归。这里注意，必须要从右边开始，因为如果从左边开始的话，停下来的时候必然是左右相遇，因为左边先动，所以停下来的时候肯定是大于第一位数的值，此时交换会使得最左边的数大于中间数，排序出错。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(array)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">recursive</span><span class="params">(begin, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> begin&gt;end:</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        l,r = begin,end</span><br><span class="line">        x = array[l]</span><br><span class="line">        <span class="keyword">while</span> l &lt; r:</span><br><span class="line">            <span class="keyword">while</span> l &lt; r <span class="keyword">and</span> array[r] &gt; x:</span><br><span class="line">                r -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> l &lt; r <span class="keyword">and</span> array[l] &lt;= x:</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            array[l],array[r]=array[r],array[l]</span><br><span class="line">        array[l],array[begin] = x,array[l]</span><br><span class="line">        <span class="keyword">print</span> begin,end,A</span><br><span class="line">        recursive(begin,l<span class="number">-1</span>)</span><br><span class="line">        recursive(r+<span class="number">1</span>,end)</span><br><span class="line"></span><br><span class="line">    recursive(<span class="number">0</span>, len(array) - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span> :  </span><br><span class="line">   </span><br><span class="line">    A = [<span class="number">10</span>, <span class="number">-3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>]</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Before sort:'</span>,A  </span><br><span class="line">    quicksort(A) </span><br><span class="line">    <span class="keyword">print</span> <span class="string">'After sort:'</span>,A</span><br></pre></td></tr></table></figure></p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p>　　<code>稳定，时间复杂度Ｏ(n^2)</code><br>　　插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，时间复杂度为O(n^2)。是稳定的排序方法。插入算法把要排序的数组分成两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。尽量用一个数组空间，而且还简单。　　<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_sort</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(A)):</span><br><span class="line">        <span class="keyword">print</span> A</span><br><span class="line">        key = A[i]</span><br><span class="line">        j = i <span class="number">-1</span></span><br><span class="line">        <span class="keyword">while</span> j&gt;=<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> A[j]&gt;key:</span><br><span class="line">                A[j+<span class="number">1</span>] = A[j]</span><br><span class="line">                j = j <span class="number">-1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        A[j+<span class="number">1</span>] = key</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/09/初级动态三连/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/09/初级动态三连/" itemprop="url">动归初级三连</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-09T23:37:00+08:00">
                2018-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/刷题/" itemprop="url" rel="index">
                    <span itemprop="name">刷题</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/09/初级动态三连/" class="leancloud_visitors" data-flag-title="动归初级三连">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="动归初级三连"><a href="#动归初级三连" class="headerlink" title="动归初级三连"></a>动归初级三连</h1><h2 id="上楼梯"><a href="#上楼梯" class="headerlink" title="上楼梯"></a>上楼梯</h2><pre><code>你正在爬楼梯。需要 n 步你才能到达顶部。
每次你可以爬 1 或 2 个台阶。你有多少种不同的方式可以爬到楼顶呢？
</code></pre><p>　　最简单的动归题目了，可以有三种方法，最近在知乎上看到一篇超棒的帖子将简单动归，<a href="https://zhuanlan.zhihu.com/p/31628866" target="_blank" rel="noopener">漫画：什么是动态规划？</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">climbStairs</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">2</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">        a = <span class="number">1</span></span><br><span class="line">        b = <span class="number">2</span></span><br><span class="line">        temp = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,n):</span><br><span class="line">            temp =a + b</span><br><span class="line">            a,b = b,temp</span><br><span class="line">        <span class="keyword">return</span> temp</span><br></pre></td></tr></table></figure></p>
<h2 id="买卖股票的最佳时机１"><a href="#买卖股票的最佳时机１" class="headerlink" title="买卖股票的最佳时机１"></a>买卖股票的最佳时机１</h2><pre><code>假设你有一个数组，其中第 i 个元素是一支给定股票第 i 天的价格。
如果您只能完成最多一笔交易（即买入和卖出一股股票），则设计一个算法来找到最大的利润。  
</code></pre><p>　　先求隔天的收益差，然后就是最大子序列和问题，具体可以看下面一道问题，这里也有很好的解释<a href="https://blog.csdn.net/chenvast/article/details/78950392" target="_blank" rel="noopener">动态规划算法—买卖股票的最佳时机系列(1-4)</a>。注意这里求的是最高收益，因此边界？条件是小与０就可以重新计算收益了。　　<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        temp = <span class="number">0</span></span><br><span class="line">        imax = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(prices)<span class="number">-1</span>):</span><br><span class="line">            d = prices[i+<span class="number">1</span>]-prices[i]</span><br><span class="line">            <span class="keyword">if</span> (temp+d&gt;<span class="number">0</span>):</span><br><span class="line">                temp += d</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                temp = <span class="number">0</span></span><br><span class="line">            imax = max(temp,imax)</span><br><span class="line">        <span class="keyword">return</span> imax</span><br></pre></td></tr></table></figure></p>
<h2 id="最大子序和"><a href="#最大子序和" class="headerlink" title="最大子序和"></a>最大子序和</h2><pre><code>给定一个序列（至少含有 1 个数），从该序列中寻找一个连续的子序列，使得子序列的和最大。
例如，给定序列 [-2,1,-3,4,-1,2,1,-5,4]，
连续子序列 [4,-1,2,1] 的和最大，为 6。
扩展练习:
若你已实现复杂度为 O(n) 的解法，尝试使用更为精妙的分治法求解。  
</code></pre><p> 　　和上题一样，直接的子序和问题，这里有篇博客从最简单的三重循环到分治到动归都讲的很详细<a href="https://www.cnblogs.com/conw/p/5896155.html" target="_blank" rel="noopener">经典算法问题 - 最大连续子数列和</a>。注意这里考虑的动归转移是考虑的以n为结尾的子序列的最大和，而不是第n个数的最大子序列和。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSubArray</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        imax = nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(nums)):</span><br><span class="line">            <span class="keyword">if</span> (nums[i<span class="number">-1</span>]&gt;<span class="number">0</span>):</span><br><span class="line">                nums[i] += nums[i<span class="number">-1</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                nums[i] += <span class="number">0</span></span><br><span class="line">            imax = max(nums[i],imax)</span><br><span class="line">        <span class="keyword">return</span> imax</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/07/Gitpage-Hexo搭建个人博客（三）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/Gitpage-Hexo搭建个人博客（三）/" itemprop="url">Gitpage + Hexo搭建个人博客（三）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T17:08:00+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/博客搭建/" itemprop="url" rel="index">
                    <span itemprop="name">博客搭建</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/07/Gitpage-Hexo搭建个人博客（三）/" class="leancloud_visitors" data-flag-title="Gitpage + Hexo搭建个人博客（三）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Gitpage-Hexo搭建个人博客（三）"><a href="#Gitpage-Hexo搭建个人博客（三）" class="headerlink" title="Gitpage + Hexo搭建个人博客（三）"></a>Gitpage + Hexo搭建个人博客（三）</h1><p>　　这里第三篇博客应该就是终极篇了，主要介绍一些使用的小技巧和一些无关外观的优化大概的内容有：  </p>
<ul>
<li>同时在github以及coding部署博客</li>
<li>Seo优化  </li>
<li>写作的一些小trick</li>
</ul>
<h2 id="1-同时在github以及coding部署博客"><a href="#1-同时在github以及coding部署博客" class="headerlink" title="1. 同时在github以及coding部署博客"></a>1. 同时在github以及coding部署博客</h2><p>　　做这个工作主要是因为github有时在国内访问太慢，所以希望国内的时候访问的是coding的服务器，但是要完成同一个域名访问两个不同的服务器，你需要有自己的域名，并且有分区解析的功能（阿里云，腾讯云都有），因此如果你没有这个需求，这个部分并没有什么看的必要，当然你也可以把你的博客移植到coding上，抛弃本来只在传说中存在的国外访客（滑稽）。  </p>
<h3 id="1-1-在coding上部署"><a href="#1-1-在coding上部署" class="headerlink" title="1.1 在coding上部署"></a>1.1 在coding上部署</h3><p>　　在coding上部署与在github上部署如出一辙，不过我们得先生存SSH秘钥。 </p>
<ol>
<li>打开git bash，使用<code>ssh -T git@git.coding.net</code>命令生成SSH 秘钥</li>
<li>输入<code>cat ~/.ssh/id_rsa.pub</code>，在命令行中会显示出你的SSM秘钥，复制<br>　　之后我们在coding上注册账号(最好与github一致），并且绑定手机或者邮箱（注意，绑定后才能提交ssh公钥，开始我找了很久）。之后：  </li>
<li>创建项目，设置为公开，项目名称和用户名与github保持一致</li>
<li>点击左上角小猴子，进入账户页面</li>
<li>打开SSH公钥，将刚才复制的内容提交上去  </li>
<li>打开新建的项目，复制右上角的HTTPS信息</li>
<li>打开HEXO配置文件，修改如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:  </span><br><span class="line">	  type: git  </span><br><span class="line">	  repository: </span><br><span class="line">              github: https://github.com/GYxiaOH/GYxiaOH.github.io.git,master</span><br><span class="line">              coding: https://git.coding.net/GYxiaOH/codingpage.git,master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>其中逗号之前是复制的信息，逗号后面是分支名，都用master就好。<br>　　设置完成重新部署hexo。部署后可以在项目中看到我们的网页文件了，之后点击pages服务，在静态中选择master分支，保存。之后就可以看到自己coding page的地址了。　　</p>
<h3 id="1-2-域名跳转"><a href="#1-2-域名跳转" class="headerlink" title="1.2 域名跳转"></a>1.2 域名跳转</h3><p>　　之后我们希望的是访问自己的域名，如果是国外的ip就跳转到github的服务器，如果是国内的ip就跳转到coding的服务器。于是乎我们先去注册一个自己的域名，国内的随便找个阿里云，腾讯云什么的，这里我用的是腾讯云。操作很简单，直接上它官网，注册，验证身份，然后查询自己想要的域名是否还在，然后注册就好。一年是28元（新手）。然后因为DNS解析需要身份审核，查你的身份证…….于是我卡在这一步了，等审核好再更新吧。<br>　　然后发现超简单。当你审核通过后，打开域名管理，在DNS解析力做如下添加：</p>
<p><img src="\\images\picture.jpg\" alt="upload successful"></p>
<p>　　ip地址和网址都不用改，然后分别在coding和github上把自己的自定义域名绑定上去，就可以直接通过域名分区优化访问了。</p>
<h2 id="2-Seo优化"><a href="#2-Seo优化" class="headerlink" title="2. Seo优化"></a>2. Seo优化</h2><p>　　比较重要的是百度和谷歌，今天没翻墙，而且百度检索的速度比谷歌慢多了所以先把百度的弄好了。其实也蛮简单的。</p>
<h3 id="百度"><a href="#百度" class="headerlink" title="百度"></a>百度</h3><p>　　首先先去<a href="http://zhanzhang.baidu.com" target="_blank" rel="noopener">百度站长平台</a>登录之后进入上方用户中心，选择站点管理，在这里验证自己的网站。一共有三种验证方式，我这里选择的是文件验证，它会给你下载一个HTML文件，你将它放入blog目录中的source目录里，当然为了避免hexo自动解析，我们打开HTML文件，在最上方添加：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<p>　　保存后重新部署网页，就可以在百度站长上看到你的网址了。　　<br>　　在这之后我们需要向百度推送我们的链接，如果你用的是next主题，可以直接把主题配置文件的<code>baidu_push</code>设置为true就够用了。不过一般的推送方法有三种，想了解的话可以参考<a href="https://blog.csdn.net/jameshadoop/article/details/53323083" target="_blank" rel="noopener">Hexo 百度提交链接</a>,这里注意下自动推送要改deploy，我也不知道它格式到底要怎么样，这里提供一种我成功的格式。  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deploy:  </span><br><span class="line">	  type: git  </span><br><span class="line">	  repo:</span><br><span class="line">              github: url,branch</span><br><span class="line">              coding: url,branch</span><br><span class="line">type: baidu_url_submit</span><br></pre></td></tr></table></figure>
<h2 id="3-写作的一些小trick"><a href="#3-写作的一些小trick" class="headerlink" title="3. 写作的一些小trick"></a>3. 写作的一些小trick</h2><h3 id="在线markdown以及hexo-admin"><a href="#在线markdown以及hexo-admin" class="headerlink" title="在线markdown以及hexo-admin"></a>在线markdown以及hexo-admin</h3><h3 id="在文章结束后加入结束标记"><a href="#在文章结束后加入结束标记" class="headerlink" title="在文章结束后加入结束标记"></a>在文章结束后加入结束标记</h3><p>　　在每篇文章后加入感谢阅读，之后就可以不要脸的在把打赏二维码放上去啦！先礼后兵嘛（滑稽）。操作如下：</p>
<ol>
<li><p>在路径<code>D:\blog\themes\next\layout\_macro</code>下创建<code>passage-end-tag.swig</code>文件，输入以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if not is_index %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #969696;font-size:18px;"</span>&gt;</span>-------------本文结束<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-paw"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>感谢您的阅读-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开<code>D:\blog\themes\next\layout\_macro\post.swig</code>,在<code>&lt;footer class=&quot;post-footer&quot;&gt;</code>之前加入以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">  &#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>打开主题配置文件，添加以下代码：  </p>
<pre><code>#文章末尾添加“本文结束”标记
passage_end_tag:
enabled: true
</code></pre></li>
</ol>
<p>　　完成后重新部署，每篇文章后便会自动添加结束标记啦。　　</p>
<h3 id="添加打赏二维码"><a href="#添加打赏二维码" class="headerlink" title="添加打赏二维码"></a>添加打赏二维码</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.gyxiaoh.com/2018/04/05/Anaconda多环境-远程jupyter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GYxiaOH">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小 君">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/Anaconda多环境-远程jupyter/" itemprop="url">Anaconda多环境+远程jupyter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T10:30:12+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/04/05/Anaconda多环境-远程jupyter/" class="leancloud_visitors" data-flag-title="Anaconda多环境+远程jupyter">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Anaconda多环境-远程jupyter"><a href="#Anaconda多环境-远程jupyter" class="headerlink" title="Anaconda多环境+远程jupyter"></a>Anaconda多环境+远程jupyter</h1><h2 id="1-Anaconda多环境"><a href="#1-Anaconda多环境" class="headerlink" title="1.Anaconda多环境"></a>1.Anaconda多环境</h2><p>　　最近在服务器上安装tensorflow,因为Python2和Python3都要体验一下，因此需要一个管理Python环境的好办法，Anaconda就是一个非常好的管理工具，并且可以在服务器上单用户管理自己的环境，操作十分简单。  </p>
<ol>
<li>首先在服务器上下载Anaconda，我这里下载的是3，理论上讲2也完全可以。上传到服务器上利用<code>bash xxxx.sh</code>安装。</li>
<li>将Anaconda目录加载进用户环境。利用<code>vim ~/.bashrc</code>打开环境变量文件，在最后加上<code>export PATH=你的anaconda目录/bin:$PATH</code>，保存退出后用<code>source ~/.bashrc</code>命令加载环境变量，成功后使用<code>conda-V</code>查看版本信息，如果出现版本号则安装成功。  </li>
<li>成功后用<code>conda create -n py3 python=3.6</code>其中-n后面是你环境的名字，同理可用<code>conda create -n py2 python=2.7</code>安装Python2.7的环境。之后利用<code>source activate py2</code>激活某种环境。</li>
<li>使用<code>source deactivate</code>退出某种环境，使用<code>conda remove -n py36 --all</code>命令删除某种环境。  </li>
</ol>
<h2 id="2-远程jupyter"><a href="#2-远程jupyter" class="headerlink" title="2.远程jupyter"></a>2.远程jupyter</h2><p>　　从caffe转向tensorflow之后终于感觉自己像个程序员而不是个炼丹师了……总之感觉Python最有用的一个‘插件’就是jupyter，这里介绍下在本机远程使用服务器jupyter的方法。  </p>
<ol>
<li><code>pip3 install jupyter</code>命令安装jupyter。</li>
<li><code>jupyter notebook --generate-config</code>命令生成配置文件。</li>
<li>输入<code>Python</code>进入python。输入以下命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from notebook.auth import passwd  </span><br><span class="line">passwd()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>设定你的密码，然后会生成类似<code>sha1:67c9e60bb8b6:9ffede0825894254b2e042ea597d771089e11aed</code>这样的秘钥。</p>
<ol>
<li><p><code>vim ~/.jupyter/jupyter_notebook_config.py</code>打开配置文件修改以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.ip=&apos;*&apos;                       # 就是设置所有ip皆可访问 </span><br><span class="line">c.NotebookApp.password = u&apos;sha:ce...       # 刚才复制的那个密文&apos;  </span><br><span class="line">c.NotebookApp.open_browser = False         # 禁止自动打开浏览器  </span><br><span class="line">c.NotebookApp.port =8888                   # 随便指定一个端口</span><br></pre></td></tr></table></figure>
</li>
<li><p>在服务器端启动 jupyter notebook</p>
</li>
<li>本地地址栏输入服务器ip:8888 输入密码，便可以成功使用了  </li>
</ol>
<p>　　理论上用nohub命令长期挂起让你即使退出账号也可以使用jupyter。但是不知道为啥我只有用sudo有nohub命令，用nohub找不到命令？不知道那个大神能解答下。<br>　　另外我使用jupyter参考tensorflow/example做了个简单的VAE网络，加了些自己的注释，有兴趣可以等我github更新。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/face.jpg"
                alt="GYxiaOH" />
            
              <p class="site-author-name" itemprop="name">GYxiaOH</p>
              <p class="site-description motion-element" itemprop="description">人世不平一剑消</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://space.bilibili.com/3334155" target="_blank" title="Bilibili">
                      
                        <i class="fa fa-fw fa-youtube-play"></i>Bilibili</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/GYxiaOH" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhhy1994226@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/1821212904/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GYxiaOH</span>

  
</div>


  <div class="powered-by">fixed by 我自己</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">做个博客好辛苦，不如回家烤红薯 </div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>Visitors
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>Total
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Ce6XhNEEnEkqv5BMidLlCs3l-gzGzoHsz", "zOAGhRSjtBhtu0LkRzxemw25");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
